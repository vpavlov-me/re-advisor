<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Advisor Permissions - Family Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f5f5f7;
            color: #1d1d1f;
        }

        /* Header */
        .header {
            background-color: white;
            border-bottom: 1px solid #d2d2d7;
            padding: 0 24px;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 64px;
        }

        .logo {
            font-size: 18px;
            font-weight: 600;
            color: #0066cc;
        }

        /* Main Container */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 32px 24px;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .breadcrumb {
            font-size: 14px;
            color: #86868b;
            margin-bottom: 12px;
        }

        .page-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .page-subtitle {
            font-size: 16px;
            color: #86868b;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 8px;
            border-bottom: 1px solid #e5e5e5;
            margin-bottom: 32px;
        }

        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            font-size: 14px;
            font-weight: 500;
            color: #86868b;
            cursor: pointer;
        }

        .tab:hover {
            color: #1d1d1f;
        }

        .tab.active {
            color: #0066cc;
            border-bottom-color: #0066cc;
        }

        /* Advisor Card */
        .advisor-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: flex-start;
            gap: 16px;
            max-width: 480px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .advisor-icon {
            font-size: 32px;
            flex-shrink: 0;
        }

        .advisor-info {
            flex: 1;
        }

        .advisor-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .advisor-section {
            margin-bottom: 8px;
        }

        .advisor-section:last-child {
            margin-bottom: 0;
        }

        .advisor-section-title {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .advisor-section-content {
            font-size: 13px;
            color: #86868b;
        }

        .advisor-actions {
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: flex-end;
        }

        .btn-manage {
            padding: 8px 16px;
            background-color: #0066cc;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
        }

        .btn-manage:hover {
            background-color: #0052a3;
        }

        .btn-delete {
            padding: 0;
            background: none;
            color: #dc3545;
            border: none;
            font-size: 20px;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-delete:hover {
            opacity: 0.7;
        }

        /* Permission Summary */
        .permission-summary {
            display: flex;
            gap: 24px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #f5f5f7;
        }

        .summary-item {
            flex: 1;
        }

        .summary-label {
            font-size: 12px;
            color: #86868b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .summary-value {
            font-size: 16px;
            font-weight: 600;
        }

        .permission-badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .permission-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-view {
            background-color: #e3f2fd;
            color: #1976d2;
        }

        .badge-modify-related {
            background-color: #fff3cd;
            color: #856404;
        }

        .badge-modify-all {
            background-color: #d1f4e0;
            color: #0d7a42;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: 40px 20px;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            max-width: 900px;
            width: 100%;
            position: relative;
        }

        .modal-header {
            padding: 32px 32px 24px 32px;
            border-bottom: 1px solid #e5e5e5;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .modal-subtitle {
            font-size: 14px;
            color: #86868b;
        }

        .close-modal {
            position: absolute;
            top: 24px;
            right: 24px;
            background: none;
            border: none;
            font-size: 28px;
            color: #86868b;
            cursor: pointer;
        }

        .close-modal:hover {
            color: #1d1d1f;
        }

        .modal-body {
            padding: 32px;
            max-height: calc(90vh - 200px);
            overflow-y: auto;
        }

        .modal-footer {
            padding: 20px 32px;
            border-top: 1px solid #e5e5e5;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        .btn-cancel {
            padding: 10px 24px;
            background-color: white;
            color: #1d1d1f;
            border: 1px solid #d2d2d7;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
        }

        .btn-save {
            padding: 10px 24px;
            background-color: #0066cc;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
        }

        .btn-save:hover {
            background-color: #0052a3;
        }

        /* Permission Template Selector */
        .template-selector {
            margin-bottom: 32px;
            padding: 20px;
            background-color: #f9f9fb;
            border-radius: 8px;
        }

        .template-label {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            display: block;
        }

        .template-select {
            width: 100%;
            padding: 10px 16px;
            border: 1px solid #d2d2d7;
            border-radius: 8px;
            font-size: 14px;
            background-color: white;
        }

        .template-description {
            margin-top: 8px;
            font-size: 13px;
            color: #86868b;
        }

        /* Permission Table */
        .permission-section {
            margin-bottom: 32px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-icon {
            font-size: 20px;
        }

        .permission-table {
            width: 100%;
            border-collapse: collapse;
        }

        .permission-table th {
            background-color: #f9f9fb;
            padding: 12px;
            text-align: left;
            font-size: 12px;
            font-weight: 600;
            color: #86868b;
            text-transform: uppercase;
            border-bottom: 2px solid #e5e5e5;
        }

        .permission-table th:first-child {
            border-radius: 8px 0 0 0;
        }

        .permission-table th:last-child {
            border-radius: 0 8px 0 0;
        }

        .permission-table td {
            padding: 12px;
            border-bottom: 1px solid #f5f5f7;
        }

        .permission-table tr:last-child td {
            border-bottom: none;
        }

        .permission-row {
            display: flex;
            gap: 8px;
        }

        .permission-option {
            flex: 1;
            text-align: center;
        }

        .permission-option input[type="radio"] {
            display: none;
        }

        .permission-option label {
            display: block;
            padding: 8px 12px;
            border: 2px solid #e5e5e5;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .permission-option input[type="radio"]:checked + label {
            border-color: #0066cc;
            background-color: #e3f2fd;
            color: #0066cc;
        }

        .permission-option label:hover {
            border-color: #0066cc;
        }

        .helper-text {
            font-size: 11px;
            color: #86868b;
            margin-top: 4px;
        }

        /* Expiration Date Section */
        .expiration-section {
            margin-top: 32px;
            padding: 20px;
            background-color: #fff3e0;
            border-radius: 8px;
            border-left: 4px solid #ff9800;
        }

        .expiration-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .expiration-input {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .expiration-input input[type="date"] {
            padding: 8px 12px;
            border: 1px solid #d2d2d7;
            border-radius: 6px;
            font-size: 14px;
        }

        .expiration-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        /* Audit History Section */
        .audit-history {
            margin-top: 32px;
            padding: 20px;
            background-color: #f9f9fb;
            border-radius: 8px;
        }

        .audit-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .audit-item {
            padding: 12px;
            background: white;
            border-radius: 6px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .audit-item:last-child {
            margin-bottom: 0;
        }

        .audit-description {
            font-size: 13px;
        }

        .audit-date {
            font-size: 12px;
            color: #86868b;
        }

        .audit-action {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .action-grant {
            background-color: #d1f4e0;
            color: #0d7a42;
        }

        .action-modify {
            background-color: #fff3cd;
            color: #856404;
        }

        /* Info Box */
        .info-box {
            padding: 16px;
            background-color: #e3f2fd;
            border-left: 4px solid #1976d2;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .info-title {
            font-size: 13px;
            font-weight: 600;
            color: #1976d2;
            margin-bottom: 8px;
        }

        .info-text {
            font-size: 13px;
            color: #1976d2;
            line-height: 1.5;
        }

        .info-list {
            margin-top: 8px;
            padding-left: 20px;
        }

        .info-list li {
            font-size: 13px;
            color: #1976d2;
            margin-bottom: 4px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="logo">RE:Family</div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <div class="page-header">
            <div class="breadcrumb">Home ‚Ä∫ Family ‚Ä∫ Family Members</div>
            <h1 class="page-title">Family Members</h1>
            <p class="page-subtitle">Manage your family members, view their profiles, and keep important information up-to-date.</p>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab">Directory</button>
            <button class="tab">Family Tree</button>
            <button class="tab active">External Advisors</button>
        </div>

        <!-- External Advisors Section -->
        <div class="advisor-card">
            <div class="advisor-icon">üìã</div>
            <div class="advisor-info">
                <div class="advisor-name">Advisor</div>
                <div class="advisor-section">
                    <div class="advisor-section-title">Contact Information:</div>
                    <div class="advisor-section-content">Linked on: 10/8/2025</div>
                </div>
            </div>
            <div class="advisor-actions">
                <button class="btn-manage" onclick="openPermissionModal()">Manage Permissions</button>
                <button class="btn-delete" title="Remove Advisor">üóëÔ∏è</button>
            </div>
        </div>
    </div>

    <!-- Permission Management Modal -->
    <div id="permission-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Manage Advisor Permissions</h2>
                <p class="modal-subtitle">Configure granular access control for External Advisor</p>
                <div style="display: flex; gap: 40px; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e5e5e5;">
                    <div>
                        <div style="font-size: 12px; color: #86868b; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Granted</div>
                        <div style="font-size: 14px; font-weight: 600;">October 8, 2025</div>
                    </div>
                    <div>
                        <div style="font-size: 12px; color: #86868b; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Expires</div>
                        <div style="font-size: 14px; font-weight: 600; color: #0d7a42;">No expiration</div>
                    </div>
                </div>
                <button class="close-modal" onclick="closePermissionModal()">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Info Box -->
                <div class="info-box">
                    <div class="info-title">üí° Three-Tier Permission Model</div>
                    <div class="info-text">
                        Control how advisors interact with each section:
                        <ul class="info-list">
                            <li><strong>None:</strong> No access to section</li>
                            <li><strong>View:</strong> Read-only access to ALL family data</li>
                            <li><strong>View + Modify (own):</strong> View all data, but only create/edit their own materials</li>
                            <li><strong>View + Modify All:</strong> Full access - can create/edit ANY materials</li>
                        </ul>
                    </div>
                </div>

                <!-- Permission Template Selector -->
                <div class="template-selector">
                    <label class="template-label">Quick Setup: Apply Permission Template</label>
                    <select class="template-select" onchange="applyTemplate(this.value)">
                        <option value="custom">Custom Configuration</option>
                        <option value="external-consul">External Consul (Full access to governance)</option>
                        <option value="governance">Governance Advisor (Constitution, Meetings, Decisions)</option>
                        <option value="succession">Succession Specialist (Succession, Education)</option>
                        <option value="philanthropy">Philanthropy Advisor (Philanthropy only)</option>
                        <option value="observer">Limited Observer (View only, selected sections)</option>
                    </select>
                    <div class="template-description" id="template-description">
                        Configure permissions manually or select a template above for quick setup.
                    </div>
                </div>

                <!-- Governance Section -->
                <div class="permission-section">
                    <div class="section-title">
                        <span class="section-icon">üèõÔ∏è</span>
                        Governance
                    </div>
                    <table class="permission-table">
                        <thead>
                            <tr>
                                <th style="width: 30%;">Section</th>
                                <th style="width: 15%;">None</th>
                                <th style="width: 15%;">View</th>
                                <th style="width: 20%;">View + Modify (own)</th>
                                <th style="width: 20%;">View + Modify All</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Family Directory</td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-directory" id="dir-none">
                                        <label for="dir-none">üö´</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-directory" id="dir-view" checked>
                                        <label for="dir-view">üëÅÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-directory" id="dir-modify-own">
                                        <label for="dir-modify-own">üëÅÔ∏è ‚úèÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-directory" id="dir-modify-all">
                                        <label for="dir-modify-all">üëÅÔ∏è üìù</label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Constitution</td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-constitution" id="const-none">
                                        <label for="const-none">üö´</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-constitution" id="const-view">
                                        <label for="const-view">üëÅÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-constitution" id="const-modify-own" checked>
                                        <label for="const-modify-own">üëÅÔ∏è ‚úèÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-constitution" id="const-modify-all">
                                        <label for="const-modify-all">üëÅÔ∏è üìù</label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Family Council & Meetings</td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-meetings" id="meet-none">
                                        <label for="meet-none">üö´</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-meetings" id="meet-view">
                                        <label for="meet-view">üëÅÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-meetings" id="meet-modify-own" checked>
                                        <label for="meet-modify-own">üëÅÔ∏è ‚úèÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-meetings" id="meet-modify-all">
                                        <label for="meet-modify-all">üëÅÔ∏è üìù</label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Decision Making</td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-decisions" id="dec-none">
                                        <label for="dec-none">üö´</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-decisions" id="dec-view" checked>
                                        <label for="dec-view">üëÅÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-decisions" id="dec-modify-own">
                                        <label for="dec-modify-own">üëÅÔ∏è ‚úèÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-decisions" id="dec-modify-all">
                                        <label for="dec-modify-all">üëÅÔ∏è üìù</label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Conflict Resolution</td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-conflict" id="conf-none" checked>
                                        <label for="conf-none">üö´</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-conflict" id="conf-view">
                                        <label for="conf-view">üëÅÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-conflict" id="conf-modify-own">
                                        <label for="conf-modify-own">üëÅÔ∏è ‚úèÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-conflict" id="conf-modify-all">
                                        <label for="conf-modify-all">üëÅÔ∏è üìù</label>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Development Section -->
                <div class="permission-section">
                    <div class="section-title">
                        <span class="section-icon">üìö</span>
                        Development
                    </div>
                    <table class="permission-table">
                        <tbody>
                            <tr>
                                <td style="width: 30%;">Education Programs</td>
                                <td style="width: 15%;">
                                    <div class="permission-option">
                                        <input type="radio" name="perm-education" id="edu-none">
                                        <label for="edu-none">üö´</label>
                                    </div>
                                </td>
                                <td style="width: 15%;">
                                    <div class="permission-option">
                                        <input type="radio" name="perm-education" id="edu-view">
                                        <label for="edu-view">üëÅÔ∏è</label>
                                    </div>
                                </td>
                                <td style="width: 20%;">
                                    <div class="permission-option">
                                        <input type="radio" name="perm-education" id="edu-modify-own" checked>
                                        <label for="edu-modify-own">üëÅÔ∏è ‚úèÔ∏è</label>
                                    </div>
                                </td>
                                <td style="width: 20%;">
                                    <div class="permission-option">
                                        <input type="radio" name="perm-education" id="edu-modify-all">
                                        <label for="edu-modify-all">üëÅÔ∏è üìù</label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Succession Planning</td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-succession" id="succ-none">
                                        <label for="succ-none">üö´</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-succession" id="succ-view" checked>
                                        <label for="succ-view">üëÅÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-succession" id="succ-modify-own">
                                        <label for="succ-modify-own">üëÅÔ∏è ‚úèÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-succession" id="succ-modify-all">
                                        <label for="succ-modify-all">üëÅÔ∏è üìù</label>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Other Sections -->
                <div class="permission-section">
                    <div class="section-title">
                        <span class="section-icon">üí°</span>
                        Other Sections
                    </div>
                    <table class="permission-table">
                        <tbody>
                            <tr>
                                <td style="width: 30%;">Communication</td>
                                <td style="width: 15%;">
                                    <div class="permission-option">
                                        <input type="radio" name="perm-communication" id="comm-none">
                                        <label for="comm-none">üö´</label>
                                    </div>
                                </td>
                                <td style="width: 15%;">
                                    <div class="permission-option">
                                        <input type="radio" name="perm-communication" id="comm-view">
                                        <label for="comm-view">üëÅÔ∏è</label>
                                    </div>
                                </td>
                                <td style="width: 20%;">
                                    <div class="permission-option">
                                        <input type="radio" name="perm-communication" id="comm-modify-own">
                                        <label for="comm-modify-own">üëÅÔ∏è ‚úèÔ∏è</label>
                                    </div>
                                </td>
                                <td style="width: 20%;">
                                    <div class="permission-option">
                                        <input type="radio" name="perm-communication" id="comm-modify-all" checked>
                                        <label for="comm-modify-all">üëÅÔ∏è üìù</label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Philanthropy</td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-philanthropy" id="phil-none">
                                        <label for="phil-none">üö´</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-philanthropy" id="phil-view">
                                        <label for="phil-view">üëÅÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-philanthropy" id="phil-modify-own">
                                        <label for="phil-modify-own">üëÅÔ∏è ‚úèÔ∏è</label>
                                    </div>
                                </td>
                                <td>
                                    <div class="permission-option">
                                        <input type="radio" name="perm-philanthropy" id="phil-modify-all" checked>
                                        <label for="phil-modify-all">üëÅÔ∏è üìù</label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Billing & Extensions</td>
                                <td colspan="4" style="text-align: center; color: #dc3545; font-weight: 600;">
                                    üîí Admin Only - Cannot be granted to advisors
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Expiration Date Section -->
                <div class="expiration-section">
                    <div class="expiration-title">‚è±Ô∏è Time-Bound Access (Optional)</div>
                    <div class="expiration-checkbox">
                        <input type="checkbox" id="enable-expiration" onchange="toggleExpiration()">
                        <label for="enable-expiration">Set expiration date for these permissions</label>
                    </div>
                    <div class="expiration-input" id="expiration-input" style="margin-top: 12px; display: none;">
                        <label style="font-size: 14px; color: #424242;">Expires on:</label>
                        <input type="date" id="expiration-date">
                        <span style="font-size: 13px; color: #86868b;">(Advisor will receive notification 7 days before expiration)</span>
                    </div>
                </div>

                <!-- Audit History -->
                <div class="audit-history">
                    <div class="audit-title">üìã Recent Permission Changes</div>
                    <div class="audit-item">
                        <div>
                            <div class="audit-description">Permissions granted to External Advisor</div>
                            <div class="audit-date">October 8, 2025 by Admin</div>
                        </div>
                        <span class="audit-action action-grant">Grant</span>
                    </div>
                    <div class="audit-item">
                        <div>
                            <div class="audit-description">Updated Communication section: Modify (own) ‚Üí Modify All</div>
                            <div class="audit-date">October 10, 2025 by Admin</div>
                        </div>
                        <span class="audit-action action-modify">Modify</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closePermissionModal()">Cancel</button>
                <button class="btn-save" onclick="savePermissions()">Save Changes</button>
            </div>
        </div>
    </div>

    <script>
        function openPermissionModal() {
            document.getElementById('permission-modal').classList.add('active');
        }

        function closePermissionModal() {
            document.getElementById('permission-modal').classList.remove('active');
        }

        function toggleExpiration() {
            const checkbox = document.getElementById('enable-expiration');
            const input = document.getElementById('expiration-input');
            input.style.display = checkbox.checked ? 'flex' : 'none';
        }

        function applyTemplate(template) {
            const descriptions = {
                'custom': 'Configure permissions manually or select a template above for quick setup.',
                'external-consul': 'Full access (View + Modify All) to all governance sections except Billing/Extensions.',
                'governance': 'View + Modify (own) for Constitution, Meetings, Communication, Decisions.',
                'succession': 'View + Modify (own) for Succession Planning and Education Programs.',
                'philanthropy': 'View + Modify (own) for Philanthropy section only.',
                'observer': 'View only access to selected sections (you choose which).'
            };

            document.getElementById('template-description').textContent = descriptions[template];

            // Template logic would go here to auto-select radio buttons
            if (template !== 'custom') {
                alert('Template "' + template + '" would be applied here. Radio buttons would be auto-selected based on template configuration.');
            }
        }

        function savePermissions() {
            alert('Permissions saved!\n\n‚Ä¢ Advisor will receive email notification\n‚Ä¢ Changes logged in audit trail\n‚Ä¢ Access takes effect immediately');
            closePermissionModal();
        }

        // Close modal on outside click
        document.getElementById('permission-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closePermissionModal();
            }
        });
    </script>
</body>
</html>
