<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ - Values, Mission & Vision Workshop</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #ea580c;
            --primary-hover: #c2410c;
            --primary-light: #fed7aa;
            --secondary: #64748b;
            --success: #16a34a;
            --danger: #dc2626;
            --warning: #ea580c;
            --background: #f8fafc;
            --surface: #ffffff;
            --border: #e2e8f0;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --radius: 0.5rem;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        .header {
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: 1.5rem 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .header-content {
            max-width: 1000px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 500;
            background: var(--primary);
            color: white;
        }

        /* Card */
        .card {
            background: var(--surface);
            border-radius: var(--radius);
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
        }

        .card-header {
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .card-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Button */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.625rem 1.25rem;
            border: none;
            border-radius: var(--radius);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-hover);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background: #475569;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-primary);
        }

        .btn-outline:hover {
            background: var(--background);
        }

        .btn-ghost {
            background: transparent;
            color: var(--text-secondary);
        }

        .btn-ghost:hover {
            background: var(--background);
            color: var(--text-primary);
        }

        .btn-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.8125rem;
        }

        .btn-icon {
            padding: 0.5rem;
            width: 2rem;
            height: 2rem;
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        /* Input */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .form-input,
        .form-select {
            width: 100%;
            padding: 0.625rem 0.875rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 0.875rem;
            transition: all 0.2s;
            font-family: inherit;
            background: var(--surface);
        }

        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(234, 88, 12, 0.1);
        }

        .form-help {
            margin-top: 0.375rem;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .input-with-button {
            display: flex;
            gap: 0.5rem;
        }

        .input-with-button .form-input {
            flex: 1;
        }

        /* Alert */
        .alert {
            padding: 1rem;
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
            display: flex;
            gap: 0.75rem;
        }

        .alert-info {
            background: #dbeafe;
            border: 1px solid #93c5fd;
            color: #1e40af;
        }

        .alert-warning {
            background: var(--primary-light);
            border: 1px solid #fdba74;
            color: #9a3412;
        }

        /* Tabs */
        .tabs {
            margin-bottom: 1.5rem;
        }

        .tabs-list {
            display: flex;
            gap: 0.5rem;
            border-bottom: 1px solid var(--border);
            margin-bottom: 1.5rem;
        }

        .tab {
            padding: 0.75rem 1rem;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .tab:hover {
            color: var(--text-primary);
            background: var(--background);
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Participant List */
        .participants-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .participant-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--surface);
            transition: all 0.2s;
        }

        .participant-item:hover {
            background: var(--background);
        }

        .participant-avatar {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            background: var(--primary-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.125rem;
            color: var(--primary);
            flex-shrink: 0;
        }

        .participant-info {
            flex: 1;
        }

        .participant-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .participant-role {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .participant-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8125rem;
        }

        .status-indicator {
            width: 0.5rem;
            height: 0.5rem;
            border-radius: 50%;
            background: var(--success);
        }

        .status-indicator.pending {
            background: var(--warning);
        }

        .participant-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* Search Results */
        .search-results {
            margin-top: 0.5rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--surface);
            max-height: 300px;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
        }

        .search-result-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .search-result-item:hover {
            background: var(--background);
        }

        .search-result-item:not(:last-child) {
            border-bottom: 1px solid var(--border);
        }

        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--text-muted);
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .empty-state-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .empty-state-description {
            font-size: 0.875rem;
        }

        /* Summary Stats */
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            padding: 1.5rem;
            border-radius: var(--radius);
            background: var(--surface);
            border: 1px solid var(--border);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .participant-item {
            animation: fadeIn 0.3s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .participant-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .participant-actions {
                width: 100%;
                justify-content: flex-end;
            }

            .summary-stats {
                grid-template-columns: 1fr;
            }
        }

        /* Info Box */
        .info-box {
            background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%);
            color: white;
            padding: 2rem;
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
        }

        .info-box h2 {
            font-size: 1.75rem;
            margin-bottom: 0.75rem;
        }

        .info-box p {
            opacity: 0.9;
            line-height: 1.6;
        }

        /* Invitation Section */
        .invitation-preview {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .invitation-preview-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        .invitation-preview-content {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Time Scheduling */
        .time-slot-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .time-slot {
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            background: var(--surface);
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .time-slot:hover {
            border-color: var(--primary-light);
            background: var(--background);
        }

        .time-slot.selected {
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .time-slot-time {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .time-slot-availability {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .availability-bar {
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .availability-bar-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.3s;
        }

        /* Calendar */
        .calendar {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1rem;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .calendar-title {
            font-weight: 600;
            font-size: 1.125rem;
        }

        .calendar-nav {
            display: flex;
            gap: 0.5rem;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
        }

        .calendar-day-header {
            text-align: center;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
            padding: 0.5rem;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.875rem;
        }

        .calendar-day:hover:not(.disabled):not(.other-month) {
            background: var(--background);
            border-color: var(--primary);
        }

        .calendar-day.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .calendar-day.today {
            border-color: var(--primary);
            font-weight: 600;
        }

        .calendar-day.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .calendar-day.other-month {
            opacity: 0.3;
            cursor: default;
        }

        /* Availability Summary */
        .availability-summary {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .availability-participant {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            background: var(--background);
            border-radius: var(--radius);
        }

        .availability-participant-name {
            flex: 1;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .availability-status {
            display: flex;
            gap: 0.25rem;
        }

        .availability-dot {
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .availability-dot:hover {
            transform: scale(1.1);
        }

        .availability-dot.available {
            background: var(--success);
            border-color: var(--success);
        }

        .availability-dot.maybe {
            background: var(--warning);
            border-color: var(--warning);
        }

        .availability-dot.unavailable {
            background: var(--danger);
            border-color: var(--danger);
        }

        /* Best Time Suggestion */
        .best-time-card {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            color: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            margin-top: 1.5rem;
        }

        .best-time-label {
            font-size: 0.875rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
        }

        .best-time-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .best-time-participants {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        /* Form Row */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">Family Governance Platform</div>
            <div class="user-info">
                <span class="badge">–§–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä</span>
                <span style="color: var(--text-secondary); font-size: 0.875rem;">–ê–Ω–Ω–∞ –ò–≤–∞–Ω–æ–≤–∞</span>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Info Box -->
        <div class="info-box">
            <h2>Workshop Setup: Participants & Schedule</h2>
            <p>Select family members from the platform, invite new participants, and coordinate a convenient workshop time.</p>
        </div>

        <!-- Summary Stats -->
        <div class="summary-stats">
            <div class="stat-card">
                <div class="stat-value" id="registered-count">0</div>
                <div class="stat-label">Registered Participants</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="invited-count">0</div>
                <div class="stat-label">Invited Guests</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="total-count">0</div>
                <div class="stat-label">Total Participants</div>
            </div>
        </div>

        <!-- Workshop Details Card -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">üìã Workshop Description</h2>
                <p class="card-description">
                    Fill in the workshop information. All invited participants will see this description.
                </p>
            </div>

            <div class="form-group">
                <label class="form-label">Workshop Name *</label>
                <input
                    type="text"
                    class="form-input"
                    id="workshop-name"
                    value="Values, Mission & Vision Workshop"
                    placeholder="Enter workshop name">
                <div class="form-help">Brief and clear title</div>
            </div>

            <div class="form-group">
                <label class="form-label">Workshop Description *</label>
                <textarea
                    class="form-input"
                    id="workshop-description"
                    rows="4"
                    placeholder="Describe the workshop goals and content...">We invite you to participate in an interactive workshop to define our family's core values, mission, and vision.

During the workshop we will:
‚Ä¢ Identify 5 key family values
‚Ä¢ Formulate our mission ‚Äî our purpose
‚Ä¢ Create a vision for the next 20-50 years

The results will form the foundation of our family constitution.</textarea>
                <div class="form-help">All invited participants will see this description</div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">Session Format</label>
                    <select class="form-select" id="workshop-format">
                        <option value="online">Online</option>
                        <option value="offline">In-Person</option>
                        <option value="hybrid">Hybrid (Online + In-Person)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Expected Duration</label>
                    <select class="form-select" id="workshop-expected-duration">
                        <option value="2">2 hours</option>
                        <option value="2.5">2.5 hours</option>
                        <option value="3" selected>3 hours</option>
                        <option value="4">4 hours</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Facilitation Type *</label>
                <select class="form-select" id="facilitation-type">
                    <option value="ai">AI Facilitation</option>
                    <option value="consultant">Consultant/Advisor</option>
                </select>
                <div class="form-help">Choose between AI-guided or professional facilitator</div>
            </div>

            <div class="form-group" id="location-field" style="display: none;">
                <label class="form-label">Location</label>
                <input
                    type="text"
                    class="form-input"
                    id="workshop-location"
                    placeholder="Address or venue name">
                <div class="form-help">Will be displayed in the invitation</div>
            </div>

            <div class="form-group">
                <label class="form-label">Meeting Link (optional)</label>
                <input
                    type="url"
                    class="form-input"
                    id="workshop-link"
                    placeholder="https://zoom.us/j/123456789 or meeting link">
                <div class="form-help">For online or hybrid format</div>
            </div>

            <div class="alert alert-info">
                <span>üí°</span>
                <div>
                    <strong>Tip:</strong> The more detailed the description, the higher the participation rate.
                    Explain why each family member's participation is important for this process.
                </div>
            </div>
        </div>

        <!-- Main Card -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">üë• Workshop Participants</h2>
                <p class="card-description">
                    Add registered family members or invite guests.
                </p>
            </div>

            <!-- Tabs -->
            <div class="tabs">
                <div class="tabs-list">
                    <button class="tab active" onclick="switchTab('registered')">
                        Registered Family Members
                    </button>
                    <button class="tab" onclick="switchTab('invite')">
                        Invite Guests
                    </button>
                    <button class="tab" onclick="switchTab('schedule')">
                        Schedule Coordination
                    </button>
                </div>

                <!-- Tab 1: Registered Members -->
                <div class="tab-content active" id="tab-registered">
                    <div class="alert alert-info">
                        <span>‚ÑπÔ∏è</span>
                        <div>
                            <strong>Hint:</strong> Select family members who should participate in the workshop.
                            They will receive a notification about the session start.
                        </div>
                    </div>

                    <!-- Search -->
                    <div class="form-group">
                        <label class="form-label">Search by name or role</label>
                        <input
                            type="text"
                            class="form-input"
                            id="search-input"
                            placeholder="Start typing name..."
                            onkeyup="filterMembers()">
                    </div>

                    <!-- Members List -->
                    <div class="participants-list" id="members-list">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Tab 2: Invite Guests -->
                <div class="tab-content" id="tab-invite">
                    <div class="alert alert-warning">
                        <span>‚ö†Ô∏è</span>
                        <div>
                            <strong>Note:</strong> Guests will receive a unique invitation link
                            and can participate in the workshop without registering on the platform.
                        </div>
                    </div>

                    <!-- Invite by Email -->
                    <div class="form-group">
                        <label class="form-label">Guest Email</label>
                        <div class="input-with-button">
                            <input
                                type="email"
                                class="form-input"
                                id="guest-email"
                                placeholder="guest@example.com">
                            <button class="btn btn-primary" onclick="addGuestByEmail()">
                                + Add
                            </button>
                        </div>
                        <div class="form-help">Guest will receive invitation to the specified email</div>
                    </div>

                    <!-- Invite by Phone -->
                    <div class="form-group">
                        <label class="form-label">Guest Phone</label>
                        <div class="input-with-button">
                            <input
                                type="tel"
                                class="form-input"
                                id="guest-phone"
                                placeholder="+1 (555) 123-4567">
                            <button class="btn btn-primary" onclick="addGuestByPhone()">
                                + Add
                            </button>
                        </div>
                        <div class="form-help">Guest will receive SMS invitation</div>
                    </div>

                    <!-- Invited Guests List -->
                    <div style="margin-top: 2rem;">
                        <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem;">
                            Invited Guests
                        </h3>
                        <div class="participants-list" id="guests-list">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Invitation Preview -->
                    <div class="invitation-preview">
                        <div class="invitation-preview-title">Invitation Preview</div>
                        <div class="invitation-preview-content">
                            <p><strong>Subject:</strong> Invitation to "Values, Mission & Vision" Workshop</p>
                            <p style="margin-top: 0.75rem;">
                                Hello!<br><br>
                                The Smith Family invites you to participate in a workshop on defining
                                our family values, mission, and vision.<br><br>
                                <strong>Date and time:</strong> to be announced<br>
                                <strong>Format:</strong> online<br><br>
                                To participate, follow this link: [Unique link]
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Tab 3: Schedule Workshop -->
                <div class="tab-content" id="tab-schedule">
                    <div class="alert alert-info">
                        <span>üìÖ</span>
                        <div>
                            <strong>Schedule Coordination:</strong> Choose convenient dates and times for the workshop.
                            Participants will receive notification and can indicate their availability.
                        </div>
                    </div>

                    <!-- Scheduling Mode Selection -->
                    <div class="form-group">
                        <label class="form-label">Scheduling Mode</label>
                        <select class="form-select" id="scheduling-mode" onchange="toggleSchedulingMode()">
                            <option value="manual">Set time now</option>
                            <option value="poll">Collect participant availability</option>
                        </select>
                        <div class="form-help">
                            Choose whether you want to set the time yourself or collect participant preferences
                        </div>
                    </div>

                    <!-- Manual Scheduling -->
                    <div id="manual-scheduling">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Workshop Date *</label>
                                <input type="date" class="form-input" id="workshop-date" min="">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Start Time *</label>
                                <input type="time" class="form-input" id="workshop-time">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Duration</label>
                                <select class="form-select" id="workshop-duration">
                                    <option value="2">2 hours</option>
                                    <option value="2.5">2.5 hours</option>
                                    <option value="3" selected>3 hours</option>
                                    <option value="4">4 hours</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Timezone</label>
                            <select class="form-select" id="timezone">
                                <option value="Europe/Moscow" selected>Moscow (GMT+3)</option>
                                <option value="Europe/London">London (GMT+0)</option>
                                <option value="America/New_York">New York (GMT-5)</option>
                                <option value="Asia/Dubai">Dubai (GMT+4)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Poll Scheduling -->
                    <div id="poll-scheduling" style="display: none;">
                        <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem;">
                            Select possible time slots
                        </h3>

                        <!-- Calendar -->
                        <div class="calendar">
                            <div class="calendar-header">
                                <button class="btn btn-ghost btn-sm" onclick="previousMonth()">‚Üê</button>
                                <div class="calendar-title" id="calendar-title">January 2025</div>
                                <button class="btn btn-ghost btn-sm" onclick="nextMonth()">‚Üí</button>
                            </div>
                            <div class="calendar-grid" id="calendar-grid">
                                <div class="calendar-day-header">Mon</div>
                                <div class="calendar-day-header">Tue</div>
                                <div class="calendar-day-header">Wed</div>
                                <div class="calendar-day-header">Thu</div>
                                <div class="calendar-day-header">Fri</div>
                                <div class="calendar-day-header">Sat</div>
                                <div class="calendar-day-header">Sun</div>
                                <!-- Days will be added here by JavaScript -->
                            </div>
                        </div>

                        <!-- Time Slots -->
                        <div style="margin-top: 1.5rem;">
                            <h4 style="font-size: 1rem; font-weight: 600; margin-bottom: 1rem;">
                                Suggest time options
                            </h4>
                            <div class="time-slot-grid" id="time-slots-container">
                                <div class="time-slot" onclick="toggleTimeSlot(this, '10:00')">
                                    <div class="time-slot-time">10:00</div>
                                    <div class="time-slot-availability">Morning</div>
                                </div>
                                <div class="time-slot" onclick="toggleTimeSlot(this, '14:00')">
                                    <div class="time-slot-time">14:00</div>
                                    <div class="time-slot-availability">Afternoon</div>
                                </div>
                                <div class="time-slot" onclick="toggleTimeSlot(this, '18:00')">
                                    <div class="time-slot-time">18:00</div>
                                    <div class="time-slot-availability">Evening</div>
                                </div>
                                <div class="time-slot" onclick="toggleTimeSlot(this, '20:00')">
                                    <div class="time-slot-time">20:00</div>
                                    <div class="time-slot-availability">Late Evening</div>
                                </div>
                            </div>
                            <div class="form-help">
                                Select multiple time options. Participants will indicate which ones work for them.
                            </div>
                        </div>

                        <!-- Participants Availability Preview -->
                        <div style="margin-top: 2rem;" id="availability-section" style="display: none;">
                            <h4 style="font-size: 1rem; font-weight: 600; margin-bottom: 1rem;">
                                Participant Availability (Preview)
                            </h4>
                            <div class="availability-summary" id="availability-summary">
                                <!-- Will be populated by JS -->
                            </div>

                            <!-- Best Time Suggestion -->
                            <div class="best-time-card">
                                <div class="best-time-label">üéØ Recommended Time</div>
                                <div class="best-time-value">Wednesday, January 15 at 6:00 PM</div>
                                <div class="best-time-participants">
                                    ‚úì 7 out of 8 participants available
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-info" style="margin-top: 1.5rem;">
                            <span>üí°</span>
                            <div>
                                After saving, participants will receive a link to fill in their availability.
                                You will be able to select the optimal time based on their responses.
                            </div>
                        </div>
                    </div>

                    <!-- Save Schedule Button -->
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="saveSchedule()">
                            üíæ Save schedule settings
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Selected Participants -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Selected Participants (<span id="selected-total">0</span>)</h2>
                <p class="card-description">
                    List of participants who will be added to the workshop
                </p>
            </div>

            <div class="participants-list" id="selected-list">
                <div class="empty-state">
                    <div class="empty-state-icon">üë•</div>
                    <div class="empty-state-title">No participants selected</div>
                    <div class="empty-state-description">
                        Add participants from registered members or invite guests
                    </div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-outline" onclick="window.history.back()">
                    ‚Üê Back
                </button>
                <button
                    class="btn btn-primary"
                    id="continue-btn"
                    disabled
                    onclick="continueToWorkshop()">
                    Continue to workshop settings ‚Üí
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sample data for registered family members
        const familyMembers = [
            { id: 1, name: 'Ivan Ivanov', role: 'Family Head', registered: true },
            { id: 2, name: 'Anna Ivanova', role: 'Spouse', registered: true },
            { id: 3, name: 'Peter Ivanov', role: 'Son', registered: true },
            { id: 4, name: 'Maria Ivanova', role: 'Daughter', registered: true },
            { id: 5, name: 'Elena Ivanova', role: 'Mother', registered: true },
            { id: 6, name: 'Dmitry Ivanov', role: 'Brother', registered: true },
            { id: 7, name: 'Olga Petrova', role: 'Sister', registered: true },
            { id: 8, name: 'Alexander Ivanov', role: 'Uncle', registered: true }
        ];

        let selectedParticipants = [];
        let invitedGuests = [];
        let currentDate = new Date(2025, 0, 1); // January 2025
        let selectedDate = null;
        let selectedTimeSlots = [];

        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            renderMembers();
            updateStats();
            initializeScheduling();
            renderCalendar();
            initializeWorkshopForm();
        });

        // Initialize workshop form
        function initializeWorkshopForm() {
            // Toggle location field based on format
            const formatSelect = document.getElementById('workshop-format');
            formatSelect.addEventListener('change', toggleLocationField);

            // Update invitation preview when description changes
            document.getElementById('workshop-description').addEventListener('input', updateInvitationPreview);
            document.getElementById('workshop-name').addEventListener('input', updateInvitationPreview);

            // Initial state
            toggleLocationField();
            updateInvitationPreview();
        }

        // Toggle location field
        function toggleLocationField() {
            const format = document.getElementById('workshop-format').value;
            const locationField = document.getElementById('location-field');

            if (format === 'offline' || format === 'hybrid') {
                locationField.style.display = 'block';
            } else {
                locationField.style.display = 'none';
            }
        }

        // Update invitation preview
        function updateInvitationPreview() {
            const name = document.getElementById('workshop-name').value || 'Values, Mission & Vision Workshop';
            const description = document.getElementById('workshop-description').value || 'We invite you to participate in the workshop...';
            const format = document.getElementById('workshop-format').options[document.getElementById('workshop-format').selectedIndex].text;

            const previewContent = document.querySelector('.invitation-preview-content');
            if (previewContent) {
                previewContent.innerHTML = `
                    <p><strong>Subject:</strong> Workshop Invitation "${name}"</p>
                    <p style="margin-top: 0.75rem;">
                        Hello!<br><br>
                        ${description.replace(/\n/g, '<br>')}<br><br>
                        <strong>Date and time:</strong> to be announced<br>
                        <strong>Format:</strong> ${format}<br><br>
                        To participate, follow the link: [Unique link]
                    </p>
                `;
            }
        }

        // Initialize scheduling
        function initializeScheduling() {
            const today = new Date();
            const minDate = today.toISOString().split('T')[0];
            document.getElementById('workshop-date').setAttribute('min', minDate);

            // Set current date to today for calendar
            currentDate = new Date();
        }

        // Render family members
        function renderMembers(filter = '') {
            const container = document.getElementById('members-list');
            const filtered = filter
                ? familyMembers.filter(m =>
                    m.name.toLowerCase().includes(filter.toLowerCase()) ||
                    m.role.toLowerCase().includes(filter.toLowerCase()))
                : familyMembers;

            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üîç</div>
                        <div class="empty-state-title">Nothing found</div>
                        <div class="empty-state-description">
                            Try changing your search query
                        </div>
                    </div>
                `;
                return;
            }

            container.innerHTML = filtered.map(member => {
                const isSelected = selectedParticipants.some(p => p.id === member.id);
                const initials = member.name.split(' ').map(n => n[0]).join('');

                return `
                    <div class="participant-item">
                        <div class="participant-avatar">${initials}</div>
                        <div class="participant-info">
                            <div class="participant-name">${member.name}</div>
                            <div class="participant-role">${member.role}</div>
                            <div class="participant-status">
                                <span class="status-indicator"></span>
                                <span>Registered</span>
                            </div>
                        </div>
                        <div class="participant-actions">
                            ${isSelected
                                ? `<button class="btn btn-outline btn-sm" onclick="removeParticipant(${member.id}, 'member')">
                                    Remove
                                </button>`
                                : `<button class="btn btn-primary btn-sm" onclick="addParticipant(${member.id})">
                                    + Add
                                </button>`
                            }
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Filter members
        function filterMembers() {
            const filter = document.getElementById('search-input').value;
            renderMembers(filter);
        }

        // Add participant
        function addParticipant(memberId) {
            const member = familyMembers.find(m => m.id === memberId);
            if (member && !selectedParticipants.some(p => p.id === memberId)) {
                selectedParticipants.push({ ...member, type: 'member' });
                renderMembers(document.getElementById('search-input').value);
                renderSelected();
                updateStats();
            }
        }

        // Remove participant
        function removeParticipant(id, type) {
            if (type === 'member') {
                selectedParticipants = selectedParticipants.filter(p => p.id !== id);
                renderMembers(document.getElementById('search-input').value);
            } else if (type === 'guest') {
                invitedGuests = invitedGuests.filter(g => g.id !== id);
                renderGuests();
            }
            renderSelected();
            updateStats();
        }

        // Add guest by email
        function addGuestByEmail() {
            const email = document.getElementById('guest-email').value.trim();
            if (!email) {
                alert('Please enter an email address');
                return;
            }

            // Basic email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address');
                return;
            }

            const guest = {
                id: Date.now(),
                name: email,
                contact: email,
                contactType: 'email',
                type: 'guest',
                status: 'pending'
            };

            invitedGuests.push(guest);
            document.getElementById('guest-email').value = '';
            renderGuests();
            renderSelected();
            updateStats();
        }

        // Add guest by phone
        function addGuestByPhone() {
            const phone = document.getElementById('guest-phone').value.trim();
            if (!phone) {
                alert('Please enter a phone number');
                return;
            }

            const guest = {
                id: Date.now(),
                name: phone,
                contact: phone,
                contactType: 'phone',
                type: 'guest',
                status: 'pending'
            };

            invitedGuests.push(guest);
            document.getElementById('guest-phone').value = '';
            renderGuests();
            renderSelected();
            updateStats();
        }

        // Render guests
        function renderGuests() {
            const container = document.getElementById('guests-list');

            if (invitedGuests.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìß</div>
                        <div class="empty-state-title">No guests invited</div>
                        <div class="empty-state-description">
                            Use the form above to invite guests
                        </div>
                    </div>
                `;
                return;
            }

            container.innerHTML = invitedGuests.map(guest => {
                const icon = guest.contactType === 'email' ? 'üìß' : 'üì±';

                return `
                    <div class="participant-item">
                        <div class="participant-avatar">${icon}</div>
                        <div class="participant-info">
                            <div class="participant-name">${guest.contact}</div>
                            <div class="participant-role">Guest (${guest.contactType === 'email' ? 'Email' : 'Phone'})</div>
                            <div class="participant-status">
                                <span class="status-indicator pending"></span>
                                <span>Invitation sent</span>
                            </div>
                        </div>
                        <div class="participant-actions">
                            <button class="btn btn-outline btn-sm" onclick="removeParticipant(${guest.id}, 'guest')">
                                Remove
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Render selected participants
        function renderSelected() {
            const container = document.getElementById('selected-list');
            const allParticipants = [...selectedParticipants, ...invitedGuests];

            if (allParticipants.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üë•</div>
                        <div class="empty-state-title">No participants selected</div>
                        <div class="empty-state-description">
                            Add participants from registered members or invite guests
                        </div>
                    </div>
                `;
                document.getElementById('continue-btn').disabled = true;
                return;
            }

            container.innerHTML = allParticipants.map(p => {
                const initials = p.type === 'member'
                    ? p.name.split(' ').map(n => n[0]).join('')
                    : (p.contactType === 'email' ? 'üìß' : 'üì±');

                return `
                    <div class="participant-item">
                        <div class="participant-avatar">${initials}</div>
                        <div class="participant-info">
                            <div class="participant-name">${p.name || p.contact}</div>
                            <div class="participant-role">
                                ${p.type === 'member' ? p.role : `Guest (${p.contactType === 'email' ? 'Email' : 'Phone'})`}
                            </div>
                            <div class="participant-status">
                                <span class="status-indicator ${p.status === 'pending' ? 'pending' : ''}"></span>
                                <span>${p.type === 'member' ? 'Registered' : 'Invitation sent'}</span>
                            </div>
                        </div>
                        <div class="participant-actions">
                            <button class="btn btn-outline btn-sm" onclick="removeParticipant(${p.id}, '${p.type}')">
                                Remove
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('continue-btn').disabled = false;
        }

        // Update stats
        function updateStats() {
            document.getElementById('registered-count').textContent = selectedParticipants.length;
            document.getElementById('invited-count').textContent = invitedGuests.length;
            document.getElementById('total-count').textContent = selectedParticipants.length + invitedGuests.length;
            document.getElementById('selected-total').textContent = selectedParticipants.length + invitedGuests.length;
        }

        // Switch tabs
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }

        // Continue to workshop
        function continueToWorkshop() {
            const total = selectedParticipants.length + invitedGuests.length;
            if (total === 0) {
                alert('Please add at least one participant');
                return;
            }

            alert(`Great! ${total} participants added. Proceeding to workshop settings...`);
            // Here you would navigate to the next step
            // window.location.href = 'workshop-settings.html';
        }

        // === SCHEDULING FUNCTIONS ===

        // Toggle scheduling mode
        function toggleSchedulingMode() {
            const mode = document.getElementById('scheduling-mode').value;
            const manualDiv = document.getElementById('manual-scheduling');
            const pollDiv = document.getElementById('poll-scheduling');

            if (mode === 'manual') {
                manualDiv.style.display = 'block';
                pollDiv.style.display = 'none';
            } else {
                manualDiv.style.display = 'none';
                pollDiv.style.display = 'block';
            }
        }

        // Render calendar
        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            // Update title
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                              'July', 'August', 'September', 'October', 'November', 'December'];
            document.getElementById('calendar-title').textContent = `${monthNames[month]} ${year}`;

            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDayOfWeek = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1; // Adjust for Monday start

            const container = document.getElementById('calendar-grid');

            // Remove all existing day elements (keep headers)
            const existingDays = container.querySelectorAll('.calendar-day, .other-month');
            existingDays.forEach(day => day.remove());

            // Add empty cells for days before month starts
            for (let i = 0; i < startingDayOfWeek; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day other-month';
                container.appendChild(emptyDay);
            }

            // Add days of the month
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;

                const dayDate = new Date(year, month, day);
                dayDate.setHours(0, 0, 0, 0);

                // Mark today
                if (dayDate.getTime() === today.getTime()) {
                    dayElement.classList.add('today');
                }

                // Disable past dates
                if (dayDate < today) {
                    dayElement.classList.add('disabled');
                } else {
                    dayElement.onclick = () => selectDate(dayDate, dayElement);
                }

                // Mark as selected if it's the selected date
                if (selectedDate && dayDate.getTime() === selectedDate.getTime()) {
                    dayElement.classList.add('selected');
                }

                container.appendChild(dayElement);
            }
        }

        // Select date
        function selectDate(date, element) {
            // Remove previous selection
            document.querySelectorAll('.calendar-day.selected').forEach(el => {
                el.classList.remove('selected');
            });

            // Add new selection
            element.classList.add('selected');
            selectedDate = date;
        }

        // Previous month
        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        // Next month
        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        // Toggle time slot
        function toggleTimeSlot(element, time) {
            element.classList.toggle('selected');

            if (element.classList.contains('selected')) {
                if (!selectedTimeSlots.includes(time)) {
                    selectedTimeSlots.push(time);
                }
            } else {
                selectedTimeSlots = selectedTimeSlots.filter(t => t !== time);
            }

            // Show availability section if time slots are selected
            if (selectedTimeSlots.length > 0 && selectedDate) {
                showAvailabilityPreview();
            }
        }

        // Show availability preview
        function showAvailabilityPreview() {
            const section = document.getElementById('availability-section');
            section.style.display = 'block';

            // Simulate participant availability
            const allParticipants = [...selectedParticipants, ...invitedGuests];
            const summary = document.getElementById('availability-summary');

            summary.innerHTML = allParticipants.map(p => {
                const name = p.name || p.contact;
                return `
                    <div class="availability-participant">
                        <div class="availability-participant-name">${name}</div>
                        <div class="availability-status">
                            <div class="availability-dot available" title="Available"></div>
                            <div class="availability-dot maybe" title="Maybe"></div>
                            <div class="availability-dot unavailable" title="Unavailable"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Save schedule
        function saveSchedule() {
            // Validate workshop details
            const workshopName = document.getElementById('workshop-name').value.trim();
            const workshopDescription = document.getElementById('workshop-description').value.trim();

            if (!workshopName) {
                alert('‚ö†Ô∏è Please specify the workshop name');
                window.scrollTo({ top: 0, behavior: 'smooth' });
                return;
            }

            if (!workshopDescription) {
                alert('‚ö†Ô∏è Please add a workshop description');
                window.scrollTo({ top: 0, behavior: 'smooth' });
                return;
            }

            const mode = document.getElementById('scheduling-mode').value;
            const format = document.getElementById('workshop-format').options[document.getElementById('workshop-format').selectedIndex].text;

            if (mode === 'manual') {
                const date = document.getElementById('workshop-date').value;
                const time = document.getElementById('workshop-time').value;
                const duration = document.getElementById('workshop-duration').value;
                const timezone = document.getElementById('timezone').options[document.getElementById('timezone').selectedIndex].text;

                if (!date || !time) {
                    alert('‚ö†Ô∏è Please specify the workshop date and time');
                    return;
                }

                const formattedDate = new Date(date).toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                alert(`‚úÖ Workshop scheduled!\n\nüìã ${workshopName}\nüìÖ ${formattedDate}\n‚è∞ ${time} (${duration} hrs)\nüåç ${timezone}\nüìç ${format}\n\nParticipants will receive invitations with full description.`);
            } else {
                if (!selectedDate) {
                    alert('‚ö†Ô∏è Please select a date on the calendar');
                    return;
                }

                if (selectedTimeSlots.length === 0) {
                    alert('‚ö†Ô∏è Please select at least one time slot');
                    return;
                }

                const formattedDate = selectedDate.toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                alert(`‚úÖ Time poll created!\n\nüìã ${workshopName}\nüìÖ ${formattedDate}\n‚è∞ Options: ${selectedTimeSlots.join(', ')}\nüìç ${format}\n\nParticipants will receive a link to indicate their availability and review the workshop description.`);
            }
        }
    </script>
</body>
</html>
