<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assessment Dashboard - Family Governance Assessment</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/screens.css">
</head>
<body>
    <div class="screen-container">
        <header class="screen-header">
            <div class="logo">ReFamily</div>
            <div class="header-actions">
                <button class="help-btn" onclick="showHelp()">‚ùì Help</button>
                <div class="user-menu">
                    <span class="user-name">–í–ª–∞–¥–∏—Å–ª–∞–≤</span>
                    <span class="user-avatar">–í</span>
                </div>
            </div>
        </header>

        <main class="screen-content" style="max-width: 900px;">
            <div class="dashboard-header">
                <h1>Assessment Dashboard</h1>
                <p style="color: var(--gray-600);">–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π —Ü–µ–Ω—Ç—Ä –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π</p>
            </div>

            <div class="overall-progress">
                <div class="progress-header">
                    <h3>–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</h3>
                    <span class="auto-save-indicator">üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ 2 –º–∏–Ω—É—Ç—ã –Ω–∞–∑–∞–¥</span>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" style="width: 62%"></div>
                </div>

                <div class="progress-stats">
                    <span><strong>65/105</strong> –≤–æ–ø—Ä–æ—Å–æ–≤ (62%)</span>
                    <span>–†–∞—Å—á—ë—Ç–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: <strong>~35 –º–∏–Ω—É—Ç</strong></span>
                </div>
            </div>

            <div class="dimension-list">
                <!-- Completed dimensions -->
                <div class="dimension-card completed" onclick="location.href='phase2-dimension-intro.html?dim=1'">
                    <div class="dimension-header">
                        <div class="dimension-title">
                            <span class="dimension-icon" style="color: #4CAF50;">üí¨</span>
                            <div>
                                <h3>1. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –∏ –¥–æ–≤–µ—Ä–∏–µ</h3>
                                <span class="dimension-meta">12 –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                            </div>
                        </div>
                        <span class="dimension-status completed">‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%; background: #4CAF50;"></div>
                    </div>

                    <div class="dimension-footer">
                        <span><strong>12/12</strong> (100%)</span>
                        <span>–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π score: <strong>6.2/7.0</strong></span>
                        <button class="btn-secondary btn-sm" onclick="event.stopPropagation();">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
                    </div>
                </div>

                <div class="dimension-card completed" onclick="location.href='phase2-dimension-intro.html?dim=2'">
                    <div class="dimension-header">
                        <div class="dimension-title">
                            <span class="dimension-icon" style="color: #2196F3;">üí∞</span>
                            <div>
                                <h3>2. –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å</h3>
                                <span class="dimension-meta">14 –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                            </div>
                        </div>
                        <span class="dimension-status completed">‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%; background: #4CAF50;"></div>
                    </div>

                    <div class="dimension-footer">
                        <span><strong>14/14</strong> (100%)</span>
                        <span>–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π score: <strong>4.5/7.0</strong></span>
                        <button class="btn-secondary btn-sm" onclick="event.stopPropagation();">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
                    </div>
                </div>

                <!-- In progress -->
                <div class="dimension-card in-progress" onclick="location.href='phase2-question.html?dim=3&q=8'">
                    <div class="dimension-header">
                        <div class="dimension-title">
                            <span class="dimension-icon" style="color: #9C27B0;">üë•</span>
                            <div>
                                <h3>3. –†–∞–∑–≤–∏—Ç–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è</h3>
                                <span class="dimension-meta">13 –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                            </div>
                        </div>
                        <span class="dimension-status in-progress">‚Üí –í –ø—Ä–æ—Ü–µ—Å—Å–µ</span>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 54%;"></div>
                    </div>

                    <div class="dimension-footer">
                        <span><strong>7/13</strong> (54%)</span>
                        <button class="btn-primary btn-sm">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí</button>
                    </div>
                </div>

                <!-- Not started -->
                <div class="dimension-card" onclick="location.href='phase2-dimension-intro.html?dim=4'">
                    <div class="dimension-header">
                        <div class="dimension-title">
                            <span class="dimension-icon" style="color: #FF9800;">‚öñÔ∏è</span>
                            <div>
                                <h3>4. –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã</h3>
                                <span class="dimension-meta">15 –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                            </div>
                        </div>
                        <span class="dimension-status not-started">‚óã –ù–µ –Ω–∞—á–∞—Ç–æ</span>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%;"></div>
                    </div>

                    <div class="dimension-footer">
                        <span><strong>0/15</strong> (0%)</span>
                        <button class="btn-secondary btn-sm">–ù–∞—á–∞—Ç—å</button>
                    </div>
                </div>

                <div class="dimension-card" onclick="location.href='phase2-dimension-intro.html?dim=5'">
                    <div class="dimension-header">
                        <div class="dimension-title">
                            <span class="dimension-icon" style="color: #00BCD4;">üß≠</span>
                            <div>
                                <h3>5. –¶–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –º–∏—Å—Å–∏—è</h3>
                                <span class="dimension-meta">11 –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                            </div>
                        </div>
                        <span class="dimension-status not-started">‚óã –ù–µ –Ω–∞—á–∞—Ç–æ</span>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%;"></div>
                    </div>

                    <div class="dimension-footer">
                        <span><strong>0/11</strong> (0%)</span>
                        <button class="btn-secondary btn-sm">–ù–∞—á–∞—Ç—å</button>
                    </div>
                </div>

                <div class="dimension-card" onclick="location.href='phase2-dimension-intro.html?dim=6'">
                    <div class="dimension-header">
                        <div class="dimension-title">
                            <span class="dimension-icon" style="color: #3F51B5;">üèõÔ∏è</span>
                            <div>
                                <h3>6. –°—Ç—Ä—É–∫—Ç—É—Ä—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
                                <span class="dimension-meta">16 –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                            </div>
                        </div>
                        <span class="dimension-status not-started">‚óã –ù–µ –Ω–∞—á–∞—Ç–æ</span>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%;"></div>
                    </div>

                    <div class="dimension-footer">
                        <span><strong>0/16</strong> (0%)</span>
                        <button class="btn-secondary btn-sm">–ù–∞—á–∞—Ç—å</button>
                    </div>
                </div>

                <div class="dimension-card" onclick="location.href='phase2-dimension-intro.html?dim=7'">
                    <div class="dimension-header">
                        <div class="dimension-title">
                            <span class="dimension-icon" style="color: #E91E63;">üîë</span>
                            <div>
                                <h3>7. –í–ª–∞–¥–µ–Ω–∏–µ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å</h3>
                                <span class="dimension-meta">14 –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                            </div>
                        </div>
                        <span class="dimension-status not-started">‚óã –ù–µ –Ω–∞—á–∞—Ç–æ</span>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%;"></div>
                    </div>

                    <div class="dimension-footer">
                        <span><strong>0/14</strong> (0%)</span>
                        <button class="btn-secondary btn-sm">–ù–∞—á–∞—Ç—å</button>
                    </div>
                </div>

                <div class="dimension-card" onclick="location.href='phase2-dimension-intro.html?dim=8'">
                    <div class="dimension-header">
                        <div class="dimension-title">
                            <span class="dimension-icon" style="color: #8BC34A;">‚ù§Ô∏è</span>
                            <div>
                                <h3>8. –°–µ–º–µ–π–Ω–∞—è –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å</h3>
                                <span class="dimension-meta">10 –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                            </div>
                        </div>
                        <span class="dimension-status not-started">‚óã –ù–µ –Ω–∞—á–∞—Ç–æ</span>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%;"></div>
                    </div>

                    <div class="dimension-footer">
                        <span><strong>0/10</strong> (0%)</span>
                        <button class="btn-secondary btn-sm">–ù–∞—á–∞—Ç—å</button>
                    </div>
                </div>
            </div>

            <!-- Family progress (optional) -->
            <div class="family-progress-section">
                <h3 style="margin-bottom: 16px;">üë• –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–µ–º—å–∏</h3>
                <div class="family-members">
                    <div class="family-member">
                        <div class="member-avatar">–ú</div>
                        <div class="member-info">
                            <div class="member-name">–ú–∞—Ä–∏—è</div>
                            <div class="member-status">85% –∑–∞–≤–µ—Ä—à–µ–Ω–æ</div>
                        </div>
                    </div>
                    <div class="family-member">
                        <div class="member-avatar">–î</div>
                        <div class="member-info">
                            <div class="member-name">–î–º–∏—Ç—Ä–∏–π</div>
                            <div class="member-status">45% –∑–∞–≤–µ—Ä—à–µ–Ω–æ</div>
                        </div>
                    </div>
                    <div class="family-member completed">
                        <div class="member-avatar">–ê</div>
                        <div class="member-info">
                            <div class="member-name">–ê–Ω–Ω–∞</div>
                            <div class="member-status">‚úì –ó–∞–≤–µ—Ä—à–∏–ª–∞</div>
                        </div>
                    </div>
                    <div class="family-member completed">
                        <div class="member-avatar">–°</div>
                        <div class="member-info">
                            <div class="member-name">–°–µ—Ä–≥–µ–π</div>
                            <div class="member-status">‚úì –ó–∞–≤–µ—Ä—à–∏–ª</div>
                        </div>
                    </div>
                    <div class="family-member pending">
                        <div class="member-avatar">–í–ª</div>
                        <div class="member-info">
                            <div class="member-name">–í–ª–∞–¥–∏–º–∏—Ä</div>
                            <div class="member-status">–û–∂–∏–¥–∞–µ—Ç</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn-primary btn-large" onclick="location.href='phase2-question.html?dim=3&q=8'">
                    –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ ‚Üí
                </button>
                <button class="btn-secondary" onclick="saveAndBreak()">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ—Ä—ã–≤
                </button>
            </div>
        </main>

        <footer style="background: var(--gray-100); padding: 16px; text-align: center; margin-top: 48px;">
            <p style="color: var(--gray-600); font-size: 14px; margin: 0;">
                Progress is saved automatically every 30 seconds. You can return to this dashboard anytime.
            </p>
        </footer>
    </div>

    <style>
        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .help-btn {
            background: none;
            border: 1px solid var(--gray-300);
            border-radius: 20px;
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }

        .help-btn:hover {
            background: var(--gray-100);
            border-color: var(--primary);
        }

        .auto-save-indicator {
            font-size: 12px;
            color: var(--gray-600);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .dimension-meta {
            font-size: 13px;
            color: var(--gray-600);
        }

        .dimension-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--gray-200);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 14px;
        }

        .family-progress-section {
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: 12px;
            padding: 24px;
            margin-top: 32px;
        }

        .family-members {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
        }

        .family-member {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
        }

        .family-member.completed {
            border-color: var(--success);
            background: #E8F5E9;
        }

        .family-member.pending {
            opacity: 0.6;
        }

        .member-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gray-300);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }

        .member-name {
            font-weight: 600;
            margin-bottom: 2px;
        }

        .member-status {
            font-size: 12px;
            color: var(--gray-600);
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 32px;
        }
    </style>

    <script src="../js/mock-data.js"></script>
    <script>
        function showHelp() {
            alert('Help Center\n\n' +
                  '‚Ä¢ Click any dimension to start or continue\n' +
                  '‚Ä¢ Progress is saved automatically\n' +
                  '‚Ä¢ You can skip up to 3 questions per dimension\n' +
                  '‚Ä¢ Take breaks as needed - use "Save and Break" button\n' +
                  '‚Ä¢ Questions remaining: 40 (~35 minutes)');
        }

        function saveAndBreak() {
            if (confirm('Your progress will be saved. You can return anytime by opening the assessment link.\n\nWould you like to schedule a reminder?')) {
                alert('Great! We\'ll send you a reminder email to continue the assessment.');
            }
        }

        // Update dashboard with mock data on load
        document.addEventListener('DOMContentLoaded', () => {
            // Update user name and avatar
            const userName = document.querySelector('.user-name');
            const userAvatar = document.querySelector('.user-avatar');
            if (CURRENT_USER) {
                userName.textContent = CURRENT_USER.name;
                userAvatar.textContent = CURRENT_USER.avatar;
            }

            // Update overall progress
            const progress = MOCK_DASHBOARD_PROGRESS;
            document.querySelector('.progress-fill').style.width = progress.overallProgress + '%';
            document.querySelector('.progress-stats').innerHTML = `
                <span><strong>${progress.answeredQuestions}/${progress.totalQuestions}</strong> –≤–æ–ø—Ä–æ—Å–æ–≤ (${progress.overallProgress}%)</span>
                <span>–†–∞—Å—á—ë—Ç–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: <strong>~${progress.estimatedTimeRemaining} –º–∏–Ω—É—Ç</strong></span>
            `;

            // Update family progress section with real member data
            const familyMembersDiv = document.querySelector('.family-members');
            if (familyMembersDiv) {
                familyMembersDiv.innerHTML = '';
                MOCK_FAMILY_MEMBERS.forEach(member => {
                    const statusClass = member.status === 'completed' ? 'completed' :
                                      member.status === 'not_started' ? 'pending' : '';

                    let statusText = '';
                    if (member.status === 'completed') {
                        statusText = '‚úì –ó–∞–≤–µ—Ä—à–∏–ª(–∞)';
                    } else if (member.status === 'in_progress') {
                        statusText = `${member.progress}% –∑–∞–≤–µ—Ä—à–µ–Ω–æ`;
                    } else {
                        statusText = '–û–∂–∏–¥–∞–µ—Ç';
                    }

                    const memberDiv = document.createElement('div');
                    memberDiv.className = `family-member ${statusClass}`;
                    memberDiv.innerHTML = `
                        <div class="member-avatar">${member.avatar}</div>
                        <div class="member-info">
                            <div class="member-name">${member.name}</div>
                            <div class="member-status">${statusText}</div>
                        </div>
                    `;
                    familyMembersDiv.appendChild(memberDiv);
                });
            }

            // Update dimension scores
            for (let dimId = 1; dimId <= 5; dimId++) {
                const dimScore = MOCK_DIMENSION_SCORES[dimId];
                if (dimScore && dimScore.yourScore) {
                    const dimensions = document.querySelectorAll('.dimension-card');
                    if (dimensions[dimId - 1]) {
                        const scoreElement = dimensions[dimId - 1].querySelector('.dimension-footer span:last-child');
                        if (scoreElement) {
                            scoreElement.innerHTML = `–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π score: <strong>${dimScore.yourScore}/7.0</strong>`;
                        }
                    }
                }
            }
        });

        // Simulate auto-save
        setInterval(() => {
            const indicator = document.querySelector('.auto-save-indicator');
            indicator.textContent = 'üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ —Ç–æ–ª—å–∫–æ —á—Ç–æ';
            setTimeout(() => {
                indicator.textContent = 'üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ 30 —Å–µ–∫—É–Ω–¥ –Ω–∞–∑–∞–¥';
            }, 30000);
        }, 30000);
    </script>
</body>
</html>
