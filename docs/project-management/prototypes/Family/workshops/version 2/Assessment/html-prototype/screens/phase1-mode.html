<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assessment Mode - Family Governance Assessment</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/screens.css">
</head>
<body>
    <div class="screen-container">
        <header class="screen-header">
            <div class="logo">ReFamily</div>
            <div class="user-menu">
                <span class="user-name">–í–ª–∞–¥–∏—Å–ª–∞–≤</span>
                <span class="user-avatar">–í</span>
            </div>
        </header>

        <main class="screen-content">
            <div class="mode-screen">
                <div class="step-indicator">
                    <span class="step-label">–®–∞–≥ 3 –∏–∑ 3</span>
                </div>

                <h1>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è</h1>

                <p class="role-description">
                    –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–π—Ç–∏ assessment —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –∏–ª–∏ —Å —Ñ–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä–æ–º –≤ live-—Å–µ—Å—Å–∏–∏.
                </p>

                <div class="role-options">
                    <!-- Self-paced mode -->
                    <div class="role-card mode-card" onclick="selectMode('self_paced')">
                        <input type="radio" name="mode" value="self_paced" id="mode_self">
                        <div class="role-content">
                            <div class="role-title">–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤ —Å–≤–æ—ë–º —Ç–µ–º–ø–µ</div>

                            <div class="mode-details">
                                <div class="mode-meta">
                                    <span>‚è±Ô∏è 90-120 –º–∏–Ω—É—Ç</span>
                                    <span>üìÖ –ö–æ–≥–¥–∞ —É–¥–æ–±–Ω–æ –≤–∞–º</span>
                                </div>

                                <p>–í—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç–µ assessment –∫–æ–≥–¥–∞ —É–¥–æ–±–Ω–æ, —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤–µ—Ä–Ω—É—Ç—å—Å—è –ø–æ–∑–∂–µ.</p>

                                <div class="privacy-pros-cons">
                                    <div class="privacy-pro">‚úì –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏</div>
                                    <div class="privacy-pro">‚úì –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ—Ä—ã–≤</div>
                                    <div class="privacy-pro">‚úì –î—É–º–∞–π—Ç–µ –Ω–∞–¥ –æ—Ç–≤–µ—Ç–∞–º–∏ —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ</div>
                                </div>

                                <div id="selfPacedOptions" class="mode-sub-options" style="display: none;">
                                    <h4 style="margin: 16px 0 12px;">–ö–æ–≥–¥–∞ –Ω–∞—á–∞—Ç—å?</h4>

                                    <label class="sub-option-card">
                                        <input type="radio" name="self_paced_timing" value="now" checked>
                                        <div class="sub-option-content">
                                            <div class="sub-option-title">‚óè –ù–∞—á–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å</div>
                                            <div class="sub-option-subtitle">–Ø –≥–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å assessment —Å–µ–π—á–∞—Å</div>
                                        </div>
                                    </label>

                                    <label class="sub-option-card">
                                        <input type="radio" name="self_paced_timing" value="scheduled">
                                        <div class="sub-option-content">
                                            <div class="sub-option-title">‚óè –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è</div>
                                            <div class="sub-option-subtitle">–í—ã–±–µ—Ä—É —É–¥–æ–±–Ω—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è</div>
                                        </div>
                                    </label>

                                    <div id="schedulePicker" class="schedule-picker" style="display: none; margin-top: 16px;">
                                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è:</label>
                                        <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                                            <input type="date"
                                                   id="scheduleDate"
                                                   min="2025-10-31"
                                                   style="padding: 12px; border: 1px solid #E0E0E0; border-radius: 8px; font-size: 14px;">
                                            <input type="time"
                                                   id="scheduleTime"
                                                   style="padding: 12px; border: 1px solid #E0E0E0; border-radius: 8px; font-size: 14px;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Facilitated mode -->
                    <div class="role-card mode-card" onclick="selectMode('facilitated')">
                        <input type="radio" name="mode" value="facilitated" id="mode_facilitated">
                        <div class="role-content">
                            <div class="role-title">–° —Ñ–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä–æ–º (–∂–∏–≤–∞—è —Å–µ—Å—Å–∏—è)</div>

                            <div class="mode-details">
                                <div class="mode-meta">
                                    <span>‚è±Ô∏è 2-3 —á–∞—Å–∞</span>
                                    <span>üë• –í—Å—è —Å–µ–º—å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ</span>
                                </div>

                                <p>–§–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä –ø—Ä–æ–≤–æ–¥–∏—Ç –≤—Å—é —Å–µ–º—å—é —á–µ—Ä–µ–∑ assessment —Å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Å—É–∂–¥–∞—é—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.</p>

                                <div class="privacy-pros-cons">
                                    <div class="privacy-pro">‚úì –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ</div>
                                    <div class="privacy-pro">‚úì –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –∏ clarifications</div>
                                    <div class="privacy-pro">‚úì –ö–æ–º–∞–Ω–¥–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ</div>
                                </div>

                                <div id="facilitatedOptions" class="mode-sub-options" style="display: none;">
                                    <h4 style="margin: 16px 0 12px;">üìÖ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã:</h4>

                                    <div class="facilitator-slots">
                                        <label class="facilitator-slot-card">
                                            <input type="radio" name="facilitator_slot" value="slot1">
                                            <div class="slot-content">
                                                <div class="slot-header">
                                                    <div class="facilitator-avatar">–ò</div>
                                                    <div class="facilitator-info">
                                                        <div class="facilitator-name">–ò–≤–∞–Ω–æ–≤ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä</div>
                                                        <div class="facilitator-credentials">Senior Family Governance Advisor</div>
                                                    </div>
                                                </div>
                                                <div class="slot-datetime">
                                                    <span class="slot-date">üìÖ 1 –Ω–æ—è–±—Ä—è 2025, —á–µ—Ç–≤–µ—Ä–≥</span>
                                                    <span class="slot-time">‚è∞ 15:00 - 17:30 (2.5 —á–∞—Å–∞)</span>
                                                </div>
                                            </div>
                                        </label>

                                        <label class="facilitator-slot-card">
                                            <input type="radio" name="facilitator_slot" value="slot2">
                                            <div class="slot-content">
                                                <div class="slot-header">
                                                    <div class="facilitator-avatar">–ü</div>
                                                    <div class="facilitator-info">
                                                        <div class="facilitator-name">–ü–µ—Ç—Ä–æ–≤–∞ –ú–∞—Ä–∏—è</div>
                                                        <div class="facilitator-credentials">Family Business Consultant</div>
                                                    </div>
                                                </div>
                                                <div class="slot-datetime">
                                                    <span class="slot-date">üìÖ 3 –Ω–æ—è–±—Ä—è 2025, —Å—É–±–±–æ—Ç–∞</span>
                                                    <span class="slot-time">‚è∞ 10:00 - 13:00 (3 —á–∞—Å–∞)</span>
                                                </div>
                                            </div>
                                        </label>

                                        <label class="facilitator-slot-card">
                                            <input type="radio" name="facilitator_slot" value="slot3">
                                            <div class="slot-content">
                                                <div class="slot-header">
                                                    <div class="facilitator-avatar">S</div>
                                                    <div class="facilitator-info">
                                                        <div class="facilitator-name">Smith John</div>
                                                        <div class="facilitator-credentials">Succession Planning Expert</div>
                                                    </div>
                                                </div>
                                                <div class="slot-datetime">
                                                    <span class="slot-date">üìÖ 5 –Ω–æ—è–±—Ä—è 2025, –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</span>
                                                    <span class="slot-time">‚è∞ 14:00 - 17:00 (3 —á–∞—Å–∞)</span>
                                                </div>
                                            </div>
                                        </label>

                                        <div class="custom-time-option">
                                            <button class="btn-secondary" style="width: 100%;" onclick="proposeCustomTime()">
                                                + –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–≤–æ—ë –≤—Ä–µ–º—è
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="recommendation-box">
                    <div class="recommendation-icon">üí°</div>
                    <div class="recommendation-content">
                        <h3>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è</h3>
                        <p>
                            –î–ª—è –ø–µ—Ä–≤–æ–≥–æ assessment'–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Ñ–æ—Ä–º–∞—Ç —Å —Ñ–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä–æ–º.
                            –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Å–µ–º—å–µ –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∏ –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º—É–º –ø–æ–ª—å–∑—ã.
                        </p>
                    </div>
                </div>

                <button id="continueBtn" class="btn-primary btn-large" disabled onclick="startAssessment()">
                    –ù–∞—á–∞—Ç—å –æ—Ü–µ–Ω–∫—É ‚Üí
                </button>
            </div>
        </main>

        <div class="screen-navigation">
            <button onclick="location.href='phase1-privacy.html'" class="btn-secondary">
                ‚Üê –ù–∞–∑–∞–¥
            </button>
            <div class="nav-progress">
                <span class="nav-label">Phase 1: Setup</span>
                <span class="nav-step">Screen 1.4 / 4</span>
            </div>
            <button id="navContinueBtn" onclick="startAssessment()" class="btn-primary" disabled>
                –ù–∞—á–∞—Ç—å ‚Üí
            </button>
        </div>
    </div>

    <style>
        .mode-card {
            border-width: 2px;
        }

        .mode-details {
            margin-top: 16px;
        }

        .mode-meta {
            display: flex;
            gap: 16px;
            margin-bottom: 12px;
            font-size: 14px;
            color: var(--gray-600);
        }

        .mode-sub-options {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--gray-200);
        }

        .sub-option-card {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .sub-option-card:hover {
            border-color: var(--primary);
            background: var(--gray-50);
        }

        .sub-option-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .sub-option-subtitle {
            font-size: 13px;
            color: var(--gray-600);
        }

        .facilitator-slots {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .facilitator-slot-card {
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
            display: block;
        }

        .facilitator-slot-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.15);
        }

        .facilitator-slot-card input[type="radio"]:checked + .slot-content {
            background: var(--primary-light);
        }

        .slot-header {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-bottom: 12px;
        }

        .facilitator-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 20px;
        }

        .facilitator-name {
            font-weight: 600;
            margin-bottom: 2px;
        }

        .facilitator-credentials {
            font-size: 12px;
            color: var(--gray-600);
        }

        .slot-datetime {
            display: flex;
            flex-direction: column;
            gap: 4px;
            font-size: 14px;
            color: var(--gray-700);
        }

        .recommendation-box {
            background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
            border-left: 4px solid var(--primary);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            gap: 16px;
            margin-bottom: 32px;
        }

        .recommendation-icon {
            font-size: 32px;
            flex-shrink: 0;
        }

        .recommendation-content h3 {
            margin-bottom: 8px;
            color: var(--gray-900);
        }

        .recommendation-content p {
            margin: 0;
            color: var(--gray-800);
        }
    </style>

    <script>
        let selectedMode = null;

        function selectMode(mode) {
            selectedMode = mode;

            // Remove selection from all cards
            document.querySelectorAll('.mode-card').forEach(c => c.classList.remove('selected'));

            // Select the card
            const card = document.querySelector(`#mode_${mode}`).closest('.mode-card');
            card.classList.add('selected');

            // Show/hide sub-options
            document.getElementById('selfPacedOptions').style.display = mode === 'self_paced' ? 'block' : 'none';
            document.getElementById('facilitatedOptions').style.display = mode === 'facilitated' ? 'block' : 'none';

            // Enable continue button
            enableContinueButton();
        }

        function enableContinueButton() {
            const canContinue = selectedMode !== null;
            document.getElementById('continueBtn').disabled = !canContinue;
            document.getElementById('navContinueBtn').disabled = !canContinue;
        }

        // Handle schedule picker
        document.addEventListener('change', (e) => {
            if (e.target.name === 'self_paced_timing') {
                const schedulePicker = document.getElementById('schedulePicker');
                schedulePicker.style.display = e.target.value === 'scheduled' ? 'block' : 'none';
            }
        });

        function proposeCustomTime() {
            alert('Feature: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.\n\n–û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —É–¥–æ–±–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ —Ñ–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä–∞–º.');
        }

        function startAssessment() {
            if (!selectedMode) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è');
                return;
            }

            // Save mode
            sessionStorage.setItem('assessmentMode', selectedMode);

            if (selectedMode === 'self_paced') {
                const timing = document.querySelector('input[name="self_paced_timing"]:checked').value;
                sessionStorage.setItem('selfPacedTiming', timing);

                if (timing === 'scheduled') {
                    const date = document.getElementById('scheduleDate').value;
                    const time = document.getElementById('scheduleTime').value;

                    if (!date || !time) {
                        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è');
                        return;
                    }

                    sessionStorage.setItem('scheduledDateTime', `${date} ${time}`);
                    // Would show confirmation screen
                    alert(`Assessment –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω –Ω–∞ ${date} –≤ ${time}`);
                }

                // Go to assessment
                location.href = 'phase2-dashboard.html';
            } else {
                const selectedSlot = document.querySelector('input[name="facilitator_slot"]:checked');
                if (!selectedSlot) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ—Ç —Å —Ñ–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä–æ–º');
                    return;
                }

                sessionStorage.setItem('facilitatorSlot', selectedSlot.value);

                // Would show confirmation
                alert('–°–µ—Å—Å–∏—è —Å —Ñ–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä–æ–º –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∞! –í—ã –ø–æ–ª—É—á–∏—Ç–µ email-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.');
                location.href = 'phase2-dashboard.html';
            }
        }

        // Restore state
        window.addEventListener('DOMContentLoaded', () => {
            const savedMode = sessionStorage.getItem('assessmentMode');
            if (savedMode) {
                selectMode(savedMode);
                document.querySelector(`#mode_${savedMode}`).checked = true;
            }
        });
    </script>
</body>
</html>
