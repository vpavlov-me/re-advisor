<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privacy Settings - Family Governance Assessment</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/screens.css">
</head>
<body>
    <div class="screen-container">
        <header class="screen-header">
            <div class="logo">ReFamily</div>
            <div class="user-menu">
                <span class="user-name">–í–ª–∞–¥–∏—Å–ª–∞–≤</span>
                <span class="user-avatar">–í</span>
            </div>
        </header>

        <main class="screen-content">
            <div class="privacy-screen">
                <div class="step-indicator">
                    <span class="step-label">–®–∞–≥ 2 –∏–∑ 3</span>
                </div>

                <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</h1>

                <p class="role-description">
                    –ö–∞–∫ –≤–∞—à–∏ –æ—Ç–≤–µ—Ç—ã –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –¥—Ä—É–≥–∏–º —á–ª–µ–Ω–∞–º —Å–µ–º—å–∏?
                </p>

                <div class="role-options">
                    <label class="role-card privacy-card" onclick="selectPrivacy(this)">
                        <input type="radio" name="privacy" value="fully_anonymous">
                        <div class="role-content">
                            <div class="role-title">–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–Ω–æ–Ω–∏–º–Ω–æ</div>
                            <div class="privacy-description">
                                <p>–î—Ä—É–≥–∏–µ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –≤–∞—à–µ–º—É –∏–º–µ–Ω–∏. –ù–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
                                <div class="privacy-pros-cons">
                                    <div class="privacy-pro">‚úì –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</div>
                                    <div class="privacy-pro">‚úì –ß–µ—Å—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –±–µ–∑ –¥–∞–≤–ª–µ–Ω–∏—è</div>
                                    <div class="privacy-con">‚ö†Ô∏è –ù–µ–ª—å–∑—è –±—É–¥–µ—Ç —Ä–∞—Å–∫—Ä—ã—Ç—å –ª–∏—á–Ω–æ—Å—Ç—å –ø–æ–∑–∂–µ</div>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="role-card privacy-card recommended" onclick="selectPrivacy(this)">
                        <input type="radio" name="privacy" value="anonymous_revealable">
                        <div class="role-content">
                            <div class="role-title">
                                –ê–Ω–æ–Ω–∏–º–Ω–æ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–∞—Å–∫—Ä—ã—Ç–∏—è
                                <span class="recommend-badge">üí° –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è</span>
                            </div>
                            <div class="privacy-description">
                                <p>–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–Ω–æ–Ω–∏–º–Ω–æ, –Ω–æ –≤—ã —Å–º–æ–∂–µ—Ç–µ —Ä–∞—Å–∫—Ä—ã—Ç—å —Å–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã –ø–æ–∑–∂–µ, –µ—Å–ª–∏ –∑–∞—Ö–æ—Ç–∏—Ç–µ.</p>
                                <div class="privacy-pros-cons">
                                    <div class="privacy-pro">‚úì –ì–∏–±–∫–æ—Å—Ç—å –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ—à–µ–Ω–∏—è</div>
                                    <div class="privacy-pro">‚úì –ù–∞—á–Ω–∏—Ç–µ –∞–Ω–æ–Ω–∏–º–Ω–æ, –æ—Ç–∫—Ä–æ–π—Ç–µ—Å—å –ø–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏</div>
                                    <div class="privacy-pro">üí° –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–µ–º–µ–π</div>
                                </div>
                            </div>
                        </div>
                    </label>

                    <label class="role-card privacy-card" onclick="selectPrivacy(this)">
                        <input type="radio" name="privacy" value="named">
                        <div class="role-content">
                            <div class="role-title">–° —É–∫–∞–∑–∞–Ω–∏–µ–º –∏–º–µ–Ω–∏</div>
                            <div class="privacy-description">
                                <p>–í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç, –∫—Ç–æ –∫–∞–∫ –æ—Ç–≤–µ—Ç–∏–ª. –ü–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–ª—è –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞.</p>
                                <div class="privacy-pros-cons">
                                    <div class="privacy-pro">‚úì –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å</div>
                                    <div class="privacy-pro">‚úì –û—Å–Ω–æ–≤–∞ –¥–ª—è —á–µ—Å—Ç–Ω–æ–≥–æ –æ–±—Å—É–∂–¥–µ–Ω–∏—è</div>
                                    <div class="privacy-con">‚ö†Ô∏è –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –º–∞–ª—ã—Ö —Å–µ–º–µ–π —Å –≤—ã—Å–æ–∫–∏–º –¥–æ–≤–µ—Ä–∏–µ–º</div>
                                </div>
                            </div>
                        </div>
                    </label>
                </div>

                <div class="facilitator-notice">
                    <div class="notice-icon">üîê</div>
                    <div class="notice-content">
                        <h3>–ß—Ç–æ –≤–∏–¥–∏—Ç —Ñ–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä?</h3>
                        <p>
                            –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫, —Ñ–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏—Ç –≤—Å–µ –æ—Ç–≤–µ—Ç—ã —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏–º—ë–Ω.
                            –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–µ–¥–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞.
                        </p>
                    </div>
                </div>

                <div class="comment-privacy-section">
                    <h3 style="margin-bottom: 16px;">–î–æ—Å—Ç—É–ø –∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º:</h3>
                    <div class="checkbox-group">
                        <label class="checkbox-card" onclick="toggleCheckbox(this)">
                            <input type="checkbox" id="commentsVisible" checked>
                            <div class="checkbox-content">
                                <div class="checkbox-title">–ú–æ–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤–∏–¥–Ω—ã –≤—Å–µ–π —Å–µ–º—å–µ</div>
                                <div class="checkbox-subtitle">–¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –æ—Ç–≤–µ—Ç–∞–º –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º</div>
                            </div>
                        </label>

                        <label class="checkbox-card" onclick="toggleCheckbox(this)">
                            <input type="checkbox" id="commentsFacilitator">
                            <div class="checkbox-content">
                                <div class="checkbox-title">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ñ–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä–∞</div>
                                <div class="checkbox-subtitle">–í–∞—à–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —É–≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤–µ–¥—É—â–∏–π —Å–µ—Å—Å–∏–∏</div>
                            </div>
                        </label>
                    </div>
                </div>

                <button id="continueBtn" class="btn-primary btn-large" disabled onclick="confirmPrivacy()">
                    –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí
                </button>
            </div>
        </main>

        <div class="screen-navigation">
            <button onclick="location.href='phase1-role.html'" class="btn-secondary">
                ‚Üê –ù–∞–∑–∞–¥
            </button>
            <div class="nav-progress">
                <span class="nav-label">Phase 1: Setup</span>
                <span class="nav-step">Screen 1.3 / 4</span>
            </div>
            <button id="navContinueBtn" onclick="confirmPrivacy()" class="btn-primary" disabled>
                –°–ª–µ–¥—É—é—â–∏–π ‚Üí
            </button>
        </div>
    </div>

    <style>
        .privacy-card {
            min-height: auto;
        }

        .privacy-description {
            margin-top: 12px;
            font-size: 14px;
            color: var(--gray-700);
        }

        .privacy-description p {
            margin-bottom: 12px;
        }

        .privacy-pros-cons {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-top: 12px;
        }

        .privacy-pro, .privacy-con {
            font-size: 13px;
            padding: 4px 0;
        }

        .privacy-pro {
            color: var(--success);
        }

        .privacy-con {
            color: var(--warning);
        }

        .recommend-badge {
            display: inline-block;
            background: var(--success);
            color: white;
            font-size: 11px;
            padding: 4px 12px;
            border-radius: 12px;
            margin-left: 8px;
            font-weight: 600;
        }

        .recommended {
            border-color: var(--success) !important;
        }

        .facilitator-notice {
            background: var(--gray-100);
            border: 1px solid var(--gray-300);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            gap: 16px;
            margin: 24px 0;
        }

        .notice-icon {
            font-size: 32px;
            flex-shrink: 0;
        }

        .notice-content h3 {
            margin-bottom: 8px;
            font-size: 16px;
        }

        .notice-content p {
            margin: 0;
            font-size: 14px;
            color: var(--gray-700);
        }

        .comment-privacy-section {
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkbox-card {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .checkbox-card:hover {
            border-color: var(--primary);
            background: var(--gray-50);
        }

        .checkbox-card input[type="checkbox"] {
            margin-top: 4px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-content {
            flex: 1;
        }

        .checkbox-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .checkbox-subtitle {
            font-size: 13px;
            color: var(--gray-600);
        }
    </style>

    <script>
        function selectPrivacy(card) {
            document.querySelectorAll('.privacy-card').forEach(c => {
                c.classList.remove('selected');
            });
            card.classList.add('selected');

            document.getElementById('continueBtn').disabled = false;
            document.getElementById('navContinueBtn').disabled = false;

            const privacyValue = card.querySelector('input[type="radio"]').value;
            sessionStorage.setItem('selectedPrivacy', privacyValue);

            // Show warning for fully anonymous
            if (privacyValue === 'fully_anonymous') {
                if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å. –í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã –æ—Å—Ç–∞–Ω—É—Ç—Å—è –∞–Ω–æ–Ω–∏–º–Ω—ã–º–∏ –Ω–∞–≤—Å–µ–≥–¥–∞.')) {
                    card.classList.remove('selected');
                    card.querySelector('input[type="radio"]').checked = false;
                    document.getElementById('continueBtn').disabled = true;
                    document.getElementById('navContinueBtn').disabled = true;
                }
            }
        }

        function toggleCheckbox(label) {
            const checkbox = label.querySelector('input[type="checkbox"]');
            const otherId = checkbox.id === 'commentsVisible' ? 'commentsFacilitator' : 'commentsVisible';
            const otherCheckbox = document.getElementById(otherId);

            if (checkbox.checked) {
                otherCheckbox.checked = false;
            }
        }

        function confirmPrivacy() {
            const selectedPrivacy = sessionStorage.getItem('selectedPrivacy');
            const commentsVisible = document.getElementById('commentsVisible').checked;

            sessionStorage.setItem('commentsVisibility', commentsVisible ? 'family' : 'facilitator');

            location.href = 'phase1-mode.html';
        }

        // Restore selection
        window.addEventListener('DOMContentLoaded', () => {
            const savedPrivacy = sessionStorage.getItem('selectedPrivacy');
            if (savedPrivacy) {
                const privacyInput = document.querySelector(`input[value="${savedPrivacy}"]`);
                if (privacyInput) {
                    const card = privacyInput.closest('.privacy-card');
                    selectPrivacy(card);
                    privacyInput.checked = true;
                }
            }

            const commentsVis = sessionStorage.getItem('commentsVisibility');
            if (commentsVis) {
                if (commentsVis === 'family') {
                    document.getElementById('commentsVisible').checked = true;
                } else {
                    document.getElementById('commentsFacilitator').checked = true;
                }
            }
        });
    </script>
</body>
</html>
